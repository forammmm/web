<style>
  body.theme-active {
    background: radial-gradient(circle at 10% 10%, #fff1f0, #fecaca, #ffddd2);
    background-size: 200% 200%;
    transition: background 0.4s ease;
  }

  .ember {
    position: fixed;
    bottom: 0;
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: linear-gradient(45deg, #ff7b39, #ff4d4d);
    filter: blur(1px);
    animation: emberRise 3s linear forwards;
  }

  @keyframes emberRise {
    0% { transform: translateY(0) scale(1); opacity: 1; }
    100% { transform: translateY(-100vh) scale(1.4); opacity: 0; }
  }

  .flash {
    position: fixed;
    inset: 0;
    pointer-events: none;
    background: rgba(255, 80, 80, 0.08);
    animation: flashPulse 2.8s ease-in-out infinite;
  }

  @keyframes flashPulse {
    0% { opacity: 0; }
    50% { opacity: 0.07; }
    100% { opacity: 0; }
  }
</style>

<script>
function startTheme() {
  document.body.classList.add('theme-active');
  window.__themeIntervals = [];

  function createEmber() {
    const el = document.createElement('div');
    el.className = 'ember';
    el.style.left = Math.random() * 100 + 'vw';
    el.style.animationDuration = (2 + Math.random() * 2) + 's';
    document.body.appendChild(el);
    setTimeout(() => el.remove(), 3500);
  }

  window.__themeIntervals.push(setInterval(createEmber, 180));

  const flash = document.createElement('div');
  flash.className = 'flash';
  document.body.appendChild(flash);
}

function stopTheme() {
  if (window.__themeIntervals) {
    window.__themeIntervals.forEach(i => clearInterval(i));
    window.__themeIntervals = [];
  }
  document.body.classList.remove('theme-active');
}
</script>
